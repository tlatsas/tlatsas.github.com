

<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>generate jekyll front-matter with bash - > kodama.gr_</title>
    <meta name="author" content="Tasos Latsas">
    
    <meta name="description" content="generate jekyll front-matter with bash Aug 31st, 2011 Creating a post in a jekyll-powered blog is pretty straightforward. Just create a file in &hellip;">
    
    <meta name="viewport" content="width=device-width">
    
    <link rel="canonical" href="http://www.kodama.gr/2011/08/31/generate-jekyll-front-matter-with-bash">
    <link href="/favicon.png" rel="icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="//atom.xml" rel="alternate" title="> kodama.gr_" type="application/atom+xml">
  </head>


  <body >

    <header>
      <div class="grid-wrapper">
  <div class="grid">

    <div class="grid__item two-fifths lap-four-sixths palm-one-whole">
  <a href="/" class="site-title">> kodama.gr_</a>
</div>

<div class="grid__item three-fifths lap-two-sixths palm-one-whole">
  <nav>
    <input type="checkbox" id="toggle">
<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
<ul class="menu pull-right">
  <li><a href="/">blog</a></li>
  <li><a href="/archives/">archives</a></li>
  <!-- <li><a href="/tags/">tags</a></li> -->
  <li><a href="/projects/">projects</a></li>
  <li><a href="/about/">about</a></li>
</ul>

  </nav>
</div>

  </div>
</div>
    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          <article class="post">
  <header>
  
  <h1 class="title indent">generate jekyll front-matter with bash</h1>
  

  
  <div class="meta clearfix">
    








  


<time class="pull-left" datetime="2011-08-31T23:35:11+03:00" pubdate data-updated="true"><i class="icon-calendar"></i> Aug 31<span>st</span>, 2011</time>
    



  

    
  </div>
  
</header>




  <p>Creating a post in a jekyll-powered blog is pretty straightforward. Just create a file in markdown format and put your post in.
Every post has a special <a href="https://github.com/mojombo/jekyll/wiki/YAML-Front-Matter">YAML Front Matter</a> block with some variables.
Using a bash script we can easily generate this file with proper values for the YAML variables.
For example, for this post, the filename contains the post date and title.</p>

<div class="highlight"><pre><code class="text">2011-08-31-generate-jekyll-front-matter-with-bash.markdown
</code></pre></div>

<p>The same values (date, title) are contained in the YAML block inside the file, but a bit more formatted.
A Bash script can take care the formatting for us by only supplying the post title as the script argument.
This assumes that the date (and optionally time) are set to the current time we run the bash script.</p>

<p>First we need to grab the date and optionaly the time.</p>

<div class="highlight"><pre><code class="bash"><span class="nv">_date</span><span class="o">=</span><span class="k">$(</span>date +<span class="s1">&#39;%Y-%m-%d&#39;</span><span class="k">)</span>
<span class="nv">_datetime</span><span class="o">=</span><span class="k">$(</span>date +<span class="s1">&#39;%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span>
</code></pre></div>

<p><strong>_date</strong> will be used for the filename and <strong>_datetime</strong> for the <em>date</em> variable.</p>

<p>We also need to replace whitespace with dashes in the post title, for use in the filename.</p>

<div class="highlight"><pre><code class="bash"><span class="nv">_post</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$1</span> | tr <span class="s1">&#39; &#39;</span> <span class="s1">&#39;-&#39;</span><span class="k">)</span>
</code></pre></div>

<p>The filename is supplied a an argument, so we might want to bail if the user does not supply one</p>

<div class="highlight"><pre><code class="bash"><span class="k">if</span> <span class="o">[[</span> -z <span class="nv">$1</span> <span class="o">]]</span>; <span class="k">then</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;A post title is required. Bye..&quot;</span>
    <span class="nb">exit </span>1
<span class="k">fi</span>
</code></pre></div>

<p>Also, another safe switch would be to check if the file already exists to prevent accidental overwrites.</p>

<p>To do that we need the absolute path for our post file. Putting all these together we have:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">_title</span><span class="o">=</span><span class="s2">&quot;${_date}-${_post}.markdown&quot;</span>
<span class="nv">_cwd</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>
<span class="nv">_post_file</span><span class="o">=</span><span class="s2">&quot;${_cwd}/${_title}&quot;</span>

<span class="k">if</span> <span class="o">[[</span> -f <span class="k">${</span><span class="nv">_post_file</span><span class="k">}</span> <span class="o">]]</span>; <span class="k">then</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;File already exists. Bye..&quot;</span>
    <span class="nb">exit </span>1
<span class="k">fi</span>
</code></pre></div>

<p>Finally, the magic code that creates our post file uses <a href="http://tldp.org/LDP/abs/html/here-docs.html">here documents</a></p>

<div class="highlight"><pre><code class="bash">cat <span class="s">&lt;&lt; EOF &gt;| ${_post_file}</span>
<span class="s">---</span>
<span class="s">layout: post</span>
<span class="s">title: $1</span>
<span class="s">date: $_datetime</span>
<span class="s">---</span>
<span class="s">EOF</span>
</code></pre></div>

<p>Make sure to avoid quoting of the <strong>EOF</strong> as bash variable subsitution wonâ€™t work.
Also, note that I used the &gt;| notation because I have the bash <a href="http://www.cyberciti.biz/tips/howto-keep-file-safe-from-overwriting.html">noclobber</a> variable set.</p>

<p>The <a href="https://github.com/tlatsas/utils-scripts/blob/master/jekyll-post">jekyll-post script</a> is on github, also added some code to prompt user for launching a text editor.</p>


</article>

 
<section id="disqus">
  <h1 class="indent title">Comments</h1>
  <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>

        
        </div>
        
        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">

  
<section class="social aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">
    Follow me!
  </h1>
  <ul class="unstyled">
    
    
    <li><a class="github" href="//github.com/tlatsas"><i class="icon-github"></i> Github</a></li>
    
    <li><a class="gplus" href="//plus.google.com/113297710160205489384"><i class="icon-google-plus-sign"></i> Google+</a></li>
    <li><a class="linkedin" href="//linkedin.com/in/tasoslatsas"><i class="icon-linkedin-sign"></i> LinkedIn</a></li>
    
    <li><a class="stackoverflow" href="//stackoverflow.com/users/1208521"><i class="icon-stackexchange"></i> StackOverflow</a></li>
    <li><a class="twitter" href="//twitter.com/tlatsas"><i class="icon-twitter"></i> Twitter</a></li>
    
  </ul>
</section>


  <section id="recent-posts" class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Recent Posts</h1>
  <ul class="divided">
    
      <li class="post">
        <a href="/2013/11/03/reading-from-named-pipes-in-xmobar/">reading from named pipes in xmobar</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/28/using-git-rebase-to-remove-duplicate-cherry-picked-commits/">using git rebase to remove duplicate cherry-picked commits</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/23/preview-sphinx-documentation/">preview sphinx documentation</a>
      </li>
    
      <li class="post">
        <a href="/2013/04/29/installing-Arch-Linux-ARM-in-Raspberry-Pi/">installing Arch Linux ARM in Raspberry Pi</a>
      </li>
    
      <li class="post">
        <a href="/2012/09/28/adjusting-HDD-spindown-with-systemd-service-files/">adjusting HDD spindown with systemd service files</a>
      </li>
    
  </ul>
</section>


</div>

        </aside>
        
      </div>
    </div>
    
    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <p class="copyright">
  All content by Tasos Latsas and licenced under <a href="//creativecommons.org/licenses/by-nc-sa/3.0/ie/">Creative Commons</a>.<br>
  Code under <a href="//github.com/coogie/oscailte/blob/master/README.md">MIT Licence</a>.
</p>
    </div>
  </div>
</div>

    </footer>

    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/md5.js"></script>
<script defer src="/javascripts/octopress.js"></script>




<script>
  var disqus_shortname = 'tlgh';
  
    
    // var disqus_developer = 1;
    var disqus_identifier = 'http://www.kodama.gr/2011/08/31/generate-jekyll-front-matter-with-bash/';
    var disqus_url = 'http://www.kodama.gr/2011/08/31/generate-jekyll-front-matter-with-bash/';
    var disqus_script = 'embed.js';
  
  (function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
</script>









  </body>
</html>